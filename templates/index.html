{% extends 'base.html' %}
{% block content %}
<section class="section">
  <h2>Upcoming events</h2>
  <div class="grid">
    {% for e, yes_names, maybe_names, no_names in events_data %}
    <article class="card">
      <div class="date-badge">
        <div class="m">{{ e.date.strftime('%b') if e.date else 'TBA' }}</div>
        <div class="d">{{ e.date.strftime('%d') if e.date else '' }}</div>
      </div>
      <h3 style="margin-left:64px">{{ e.title }}</h3>
      <p class="muted small" style="margin-left:64px">
        {{ e.date.strftime('%A, %B %d, %Y') if e.date else 'Date TBA' }} •
        {% if e.start_time %}{{ e.start_time.strftime('%H:%M') }}{% else %}Time TBA{% endif %}
        {% if e.end_time %} → {{ e.end_time.strftime('%H:%M') }}{% endif %}
        {% if not e.end_time and e.start_time %} • No specified end time{% endif %}
        {% if e.dry %} • Dry{% endif %}
      </p>
      <p>{{ e.description }}</p>
      <div class="names">
        <div class="pill">Going: {{ yes_names|join(', ') if yes_names else '—' }}</div>
        <div class="pill">Maybe: {{ maybe_names|join(', ') if maybe_names else '—' }}</div>
        <div class="pill">No: <span style="color:#f87171">{{ no_names|join(', ') if no_names else '—' }}</span></div>
      </div>
      <a class="btn ghost" href="{{ url_for('event_detail', event_id=e.id) }}">Open</a>
    </article>
    {% endfor %}
  </div>
</section>
{% endblock %}
