{% extends "base.html" %}
{% block content %}
<h1 class="h1">Upcoming events</h1>
<div class="grid">
  {% for ev in events %}
  <a class="card" href="{{ url_for('event_detail', event_id=ev.id) }}">
    <div class="card-top">
      <h2>{{ ev.title }}</h2>
      {% if ev.dry %}<span class="pill green" title="No alcohol/weed">Dry</span>{% endif %}
    </div>
    <p class="muted">{{ ev.date.strftime("%A, %b %d, %Y") }}{% if ev.doors_open_time %} @ {{ ev.doors_open_time.strftime("%H:%M") }}{% endif %}{% if not ev.no_specified_end_time and ev.leave_by_time %} – {{ ev.leave_by_time.strftime("%H:%M") }}{% else %} · no specified end time{% endif %}</p>
    <p>{{ ev.description|default("No description", true) }}</p>
    <div class="row wrap gap">
      <span class="pill">Going: {{ summary[ev.id]["going"]|length }}</span>
      <span class="pill">Maybe: {{ summary[ev.id]["maybe"]|length }}</span>
      <span class="pill">No: {{ summary[ev.id]["no"]|length }}</span>
      <span class="pill red" title="People with schedule conflicts">Busy: {{ summary[ev.id]["busy"]|length }}</span>
    </div>
  </a>
  {% else %}
  <p>No events yet. Create one!</p>
  {% endfor %}
</div>
{% endblock %}
