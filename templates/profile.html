{% extends "base.html" %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='profile.css') }}">

<h2>Your Profile</h2>

<form method="POST" action="{{ url_for('profile') }}" class="profile-name-form">
  <label for="name">Display name</label>
  <input type="text" id="name" name="name" value="{{ current_user.name }}" required>
  <button type="submit">Update Name</button>
</form>

<hr>

<h3>Your Events</h3>
{% if events %}
  <ul class="pp-event-list">
    {% for e in events %}
      <li class="pp-event-item">
        <div class="pp-event-info">
          <strong>{{ e.title }}</strong>
          <div class="pp-event-sub">
            {{ e.date.strftime('%Y-%m-%d') }}
            {% if e.description %} • {{ e.description|truncate(120) }}{% endif %}
            {% if e.capacity is defined and e.capacity is not none %} • Capacity: {{ e.capacity }}{% endif %}
          </div>
        </div>
        <div class="pp-event-actions">
          <a class="btn" href="{{ url_for('edit_event', event_id=e.id) }}">Edit</a>
          <form method="POST" action="{{ url_for('delete_event', event_id=e.id) }}" onsubmit="return confirm('Delete this event?');">
            <button class="btn btn-danger" type="submit">Delete</button>
          </form>
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No events created yet.</p>
{% endif %}

{% endblock %}
