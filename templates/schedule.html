{% extends "base.html" %}
{% block content %}
<h1 class="h1">Your schedule</h1>
<p class="muted">Add time blocks when you're <strong>unavailable</strong>. We'll flag conflicts on events.</p>
<form method="post" class="form">
  <div class="grid3">
    <label> Date
      <input type="date" name="date" required>
    </label>
    <label> Start
      <input type="time" name="start" required>
    </label>
    <label> End
      <input type="time" name="end" required>
    </label>
  </div>
  <button class="btn" type="submit">Add block</button>
</form>

<h2>Blocks</h2>
<table class="table">
  <thead><tr><th>Date</th><th>Start</th><th>End</th><th></th></tr></thead>
  <tbody>
    {% for w in wins %}
      <tr>
        <td>{{ w.date.strftime('%Y-%m-%d') }}</td>
        <td>{{ w.start_time.strftime('%H:%M') }}</td>
        <td>{{ w.end_time.strftime('%H:%M') }}</td>
        <td>
          <form method="post" action="{{ url_for('delete_window', win_id=w.id) }}">
            <button class="btn tiny danger" type="submit">Delete</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr><td colspan="4" class="muted">No blocks yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
