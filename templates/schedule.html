{% extends 'base.html' %}
{% block content %}
<section class="section">
  <h2>Your schedule (busy times)</h2>
  <form method="post" class="form grid2">
    <label>Start date<input type="date" name="start_date" required></label>
    <label>End date<input type="date" name="end_date" required></label>
    <label>Start time<input type="time" name="start_time"></label>
    <label>End time<input type="time" name="end_time"></label>
    <div class="full"><button class="btn">Add busy block</button></div>
  </form>

  <h3 class="mt">Saved</h3>
  {% if blocks %}
  <table class="table">
    <thead><tr><th>Dates</th><th>Times</th><th class="right">Actions</th></tr></thead>
    <tbody>
      {% for b in blocks %}
      <tr>
        <td>{{ b.start_date.isoformat() }} → {{ b.end_date.isoformat() }}</td>
        <td>
          {% if b.start_time %}{{ b.start_time.strftime('%H:%M') }}{% else %}—{% endif %}
          –
          {% if b.end_time %}{{ b.end_time.strftime('%H:%M') }}{% else %}—{% endif %}
        </td>
        <td class="right">
          <form method="post" action="{{ url_for('delete_block', block_id=b.id) }}">
            <button class="btn small danger">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p class="muted">No busy times yet.</p>
  {% endif %}
</section>
{% endblock %}
